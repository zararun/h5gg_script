<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>統合チートメニュー 完全版</title>
<style>
  body {
    margin: 0;
    padding: 8px;
    background: black;
    font-family: sans-serif;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow: hidden;
    font-size: 13px; /* フォントを少し小さく */
  }

  .tab-container {
    width: 360px; /* 全体を少し小さく */
    background: #111;
    padding: 8px;
    border-radius: 10px;
  }

  .nav {
    display: flex;
    justify-content: center;
    gap: 5px;
    margin-bottom: 8px;
  }

  .nav button, .page button {
    flex: 1;
    background: #222;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 6px;
    font-size: 13px;
    cursor: pointer;
  }

  .page {
    display: none;
    flex-direction: column;
    gap: 5px;
    max-height: 400px; /* 高さを少し小さく */
    overflow-y: auto;
  }

  .active { display: flex; }

  textarea {
    width: 100%;
    height: 130px; /* 高さを少し縮小 */
    background: #111;
    color: white;
    border: 1px solid #555;
    border-radius: 5px;
    resize: none;
    padding: 4px;
    font-size: 13px;
  }

  input[type="file"] {
    margin-top: 5px;
    color: white;
    background: #222;
    border: 1px solid #555;
    border-radius: 5px;
    padding: 4px;
    font-size: 13px;
  }
</style>
</head>
<body>
<div class="tab-container">
  <div class="nav">
    <button onclick="showPage(1)">タブ1</button>
    <button onclick="showPage(2)">タブ2</button>
    <button onclick="showPage(3)">タブ3</button>
  </div>

  <!-- タブ1 -->
  <div id="page1" class="page active">
    <button onclick="banless()">バンレス</button>
    <button onclick="cambers()">鬼キャン</button>
    <button onclick="metal()">本体メッキ</button>
    <button onclick="windowMetal()">窓メッキ</button>
    <button onclick="cheatparts()">チートパーツ</button>
  </div>

  <!-- タブ2 -->
  <div id="page2" class="page">
    <button onclick="longname()">ロングネーム</button>
    <button onclick="drone()">ドローン</button>
    <button onclick="airwalk()">空中歩行</button>
    <button onclick="wallhack()">壁貫通</button>
    <button onclick="longname()">ロングネーム</button>
  </div>

  <!-- タブ3 -->
  <div id="page3" class="page">
    <textarea placeholder="メモを書いてください"></textarea>
    <input type="file" id="scriptFile" accept=".html,.js">
    <button onclick="runLocalScript()">選択したHTML/JSを実行</button>
  </div>
</div>

<script>
function showPage(pageNum) {
  document.getElementById('page1').classList.remove('active');
  document.getElementById('page2').classList.remove('active');
  document.getElementById('page3').classList.remove('active');
  document.getElementById('page' + pageNum).classList.add('active');
}

// --- タブ1 & タブ2のh5gg機能 ---
function banless() {
  (async function () {
    if(confirm('#1のパーツを購入')) h5gg.searchNumber('0','I32','0x0','0x200000000'); else return;
    if(confirm('#2のパーツを購入')) h5gg.searchNumber('1','I32','0x0','0x200000000'); else return;
    if(confirm('#3のパーツを購入')) h5gg.searchNumber('2','I32','0x0','0x200000000'); else return;
    if(confirm('#4のパーツを購入')) h5gg.searchNumber('3','I32','0x0','0x200000000'); else return;
    h5gg.editAll('-1','F32'); alert('バンレス完了');
  })();
}

function cambers() {
  h5gg.clearResults();
  if(confirm("キャンバー角を10にしてください")) h5gg.searchNumber('-10','F32','0x0','0x200000000');
  if(confirm("キャンバー角を0にしてください")) h5gg.searchNumber('0','F32','0x0','0x200000000');
  if(confirm("もう一度キャンバー角を10にしてください")) h5gg.searchNumber('-10','F32','0x0','0x200000000');
  let angle = prompt("したい角度を入力");
  if(angle) h5gg.editAll(angle,'F32');
}

function metal() { h5gg.clearResults(); h5gg.searchNumber('1','F32','0x0','0x200000000'); h5gg.editAll('99','F32'); }
function windowMetal() { h5gg.clearResults(); h5gg.searchNumber('0.3','F32','0x0','0x200000000'); h5gg.editAll('55','F32'); }
function cheatparts() { h5gg.clearResults(); h5gg.searchNumber('1','I32','0x0','0x200000000'); h5gg.editAll('999','I32'); }

function longname() {
  h5gg.clearResults();
  function showMessageAndWait(message, callback) { alert(message); callback(); }
  showMessageAndWait("名前に3文字入力してください", function() {
    h5gg.searchNumber('3','I32','0x0','0x200000000');
    showMessageAndWait("名前に5文字入力してください", function() {
      h5gg.searchNumber('5','I32','0x0','0x200000000');
      showMessageAndWait("名前に7文字入力してください", function() {
        h5gg.searchNumber('7','I32','0x0','0x200000000');
        h5gg.editAll('20','I32');
        showMessageAndWait("ロングネーム完了", function(){});
      });
    });
  });
}

function drone() { h5gg.clearResults(); h5gg.searchNumber('-10','F32','0x0','0x200000000'); h5gg.editAll('-130','F32'); }
function airwalk() { h5gg.clearResults(); h5gg.searchNumber('-9.8','F32','0x0','0x200000000'); h5gg.editAll('0','F32'); }
function wallhack() { h5gg.clearResults(); h5gg.searchNumber('-10','F32','0x0','0x200000000'); h5gg.editAll('999999999','F32'); }

// --- タブ3 HTML/JS 実行 ---
function runLocalScript() {
  const fileInput = document.getElementById('scriptFile');
  if(fileInput.files.length === 0) return;
  const file = fileInput.files[0];
  const reader = new FileReader();
  reader.onload = function(e) {
    const ext = file.name.split('.').pop().toLowerCase();
    if(ext === 'html') {
      const newWindow = window.open();
      newWindow.document.write(e.target.result);
    } else if(ext === 'js') {
      try { eval(e.target.result); }
      catch(err){ alert('JS実行エラー: '+err); }
    }
  };
  reader.readAsText(file);
}
</script>
</body>
</html>